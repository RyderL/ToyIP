# ToyIP

一个基于**tun/tap**设备编写的简易的**tcp/ip**协议栈.

这个协议栈只是为了更进一步学习网络编程的一个练习之作.大部分代码参考了[`level-ip`](https://github.com/saminiir/level-ip).

我仔细读完了**level-ip**的实现,发现实现一个协议栈其实并不是很难的一件事情,`arp`, `icmp`,`udp`这些不带任何状态的协议实现起来没有太大难度,当然,**tcp**协议的实现还是很有难度的,它的难度不在于编程的技巧,而是在于复杂性,毕竟它带状态,是一个状态机,而且是`11`种状态,要考虑的情况非常之多.

说到底,不管是**level-ip**还是别的实现,各种协议栈的实现都带有**linux**协议栈的影子,**linux**协议栈好是好,但是为了追求性能放弃了可读性,而且代码过长,不太适合学习.所以各种简易的实现便层出不穷,事实上,**level-ip**的实现仍然不够简洁,我希望在它的基础上实现一个相对简洁的协议栈.这个协议栈自然不是为了实用,只是为了学习而已.

实现这个东西虽然不是多难的事情,但是还是要花费掉大量的时间的,好处当然有,自打我读实现和写实现以来,我对网络的理解更近了一步,同时对于怎样配置网络,也变得非常熟悉了.更加重要的是,我对于某些网络知识的了解不再只是浮于表面,使用起**linux**的一大堆网络函数也更加得心应手.同时对于**linux**下编程也有了更深的体会.

究竟你有没有必要看一下网络栈的实现,或者自己亲手实现一把协议栈,因人而异吧,不过我个人推荐写网络程序的程序员最好还是了解一下底层的协议会比较好,不然一旦你写的程序出了问题,你甚至会不知道问题出在哪里.



写这个玩意进度不可能太快,慢慢熬吧.希望在5月底能够弄出一个初版,初版写完之后,我就着手写如何调试,配置以及各个协议的原理了,然后贴成博客.




最好的关于协议栈介绍的书籍还是网络之神的那几本大头书,`tcpip`卷详解`1`,卷二的话,可以读一下,然后是`unp`.边写协议栈边读这几本书,收获自然是最大的.


至于如何在你的机器上运行这里的代码,可以参照这里:
1. [http://blog.csdn.net/lishuhuakai/article/details/70305543](http://blog.csdn.net/lishuhuakai/article/details/70305543)
2. [http://blog.csdn.net/lishuhuakai/article/details/70498149](http://blog.csdn.net/lishuhuakai/article/details/70498149)

代码正在施工之中. ==> 代码大体完工,接下来要除虫了,还有需要写博客了.

已经完工的协议有**arp**和**icmp**, **tcp**基本上已经可以使用,**udp**协议还没有测试.现在正在完善对外的接口.

有时间的话,我要将它改成**cpp**版本,那个时候,代码量会更加少,封装也会更加漂亮.

